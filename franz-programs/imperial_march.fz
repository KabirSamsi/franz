motif opening() {
    qt; qt; qt; et.; sx; qt; et.; sx; hf;
};

motif middleIntro() {
    qt; et.; sx; qt; et.; sx;
}

motif chromaticTransition() {
    sx; sx; qt; et; qt; et.; sx;
}

motif middleOutro() {
    qt; et.; sx; hf;
}

control = {
    use {
        key = {b_flt, e_flt};
        meter = 4/4;
        tempo = Andante;
    };

    intro = {
        opening({g4; g4; g4; e4; b4; g4; e4; b4; g4}) + opening({d5; d5; d5; e5; b4; f4_shp; e4; b4; g4});
    };

    middlePrefix = {
        middleIntro({g5; g4; g4; g5; f5_shp; f5_ntl}) +
        chromaticTransition({e5_ntl; d5_shp; e5_ntl; g4_shp; c5_shp; c5_ntl; b4_ntl})
    };

    middlePart1 = {
        middlePrefix +
        chromaticTransition({b4; a4; b4; e4; g4_flt; e4; g4_ntl}) +
        middleOutro(b4; g4; b4; d4)
    }

    middlePart2 = {
        middlePrefix +
        chromaticTransition({b4; a4; b4; e4; g4_flt; e4; b4}) +
        middleOutro(g4; e4; b4; g4)
    }

    return {intro + middlePart1 + middlePart2};
}